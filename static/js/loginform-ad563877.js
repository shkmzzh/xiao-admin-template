import{d as k,ak as x,ag as y,r as d,o as F,L as V,e as $,f as B,a2 as a,w as t,h as _,ap as C,aq as A,a0 as I,m as i,aa as R,ab as S}from"./index-434b207a.js";import{E as L,a as N,b as P}from"./el-input-7d37c056.js";import{E as U}from"./el-button-3711da27.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";const z=r=>(R("data-v-03bcb0fa"),r=r(),S(),r),q={class:"login-form"},G=z(()=>i("span",{class:"text"},"还没有帐号? ",-1)),W=k({__name:"loginform",emits:["changeForm"],setup(r,{emit:f}){const g=x(),v=y(),o=d({appkey:"U2FsdGVkX19WSQ59Cg+Fj9jNZPxRC5y0xB1iV06BeNA=",phone:"",password:""}),b=d({phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^((\(\d{2,3}\))|(\d{3}\-))?1[3|5|8]\d{9}$/,message:"手机号格式错误",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)]|[()])+$)(?!^.*[\u4E00-\u9FA5].*$)([^(0-9a-zA-Z)]|[()]|[a-z]|[A-Z]|[0-9]){8,18}$/,message:"密码格式应为8-18位数字、字母、符号的任意两种组合",trigger:"blur"}]}),u=d(),c=async s=>{s&&await s.validate((e,n)=>{if(e){console.log(o.value),v.setLogin(o.value).then(()=>{g.push({path:"/"})});debugger}else console.log("error submit!",n)})};function w(){f("changeForm",!1)}function m({code:s}){s==="Enter"&&c(u.value)}return F(()=>{window.document.addEventListener("keypress",m)}),V(()=>{window.document.removeEventListener("keypress",m)}),(s,e)=>{const n=L,p=N,h=U,E=P;return $(),B("div",q,[a(E,{ref_key:"ruleFormRef",ref:u,model:o.value,rules:b.value},{default:t(()=>[a(p,{prop:"phone"},{default:t(()=>[a(n,{"prefix-icon":_(C),placeholder:"手机号",clearable:"",modelValue:o.value.phone,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.phone=l)},null,8,["prefix-icon","modelValue"])]),_:1}),a(p,{prop:"password"},{default:t(()=>[a(n,{"prefix-icon":_(A),placeholder:"密码",clearable:"",type:"password","show-password":"",modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.password=l)},null,8,["prefix-icon","modelValue"])]),_:1}),a(p,null,{default:t(()=>[a(h,{type:"primary",onClick:e[2]||(e[2]=l=>c(u.value))},{default:t(()=>[I("登录")]),_:1})]),_:1})]),_:1},8,["model","rules"]),i("div",{class:"sub-link"},[G,i("span",{class:"to-create",onClick:w},"创建新帐号")])])}}});const T=Z(W,[["__scopeId","data-v-03bcb0fa"]]);export{T as default};
